{"version":3,"sources":["webpack:///./node_modules/matrix-react-sdk/src/async-components/views/dialogs/security/ImportE2eKeysDialog.js","webpack:///./node_modules/matrix-react-sdk/src/utils/MegolmExportEncryption.ts"],"names":["ImportE2eKeysDialog","React","Component","constructor","props","super","ev","files","this","_file","current","setState","enableSubmit","_passphrase","value","length","preventDefault","_startImport","onFinished","_unmounted","createRef","state","phase","errStr","componentWillUnmount","file","passphrase","Promise","resolve","reject","reader","FileReader","onload","e","target","result","onerror","readAsArrayBuffer","readFileAsArrayBuffer","then","arrayBuffer","MegolmExportEncryption","keys","matrixClient","importRoomKeys","JSON","parse","catch","console","error","msg","friendlyText","_t","render","BaseDialog","sdk","disableForm","className","title","onSubmit","_onFormSubmit","htmlFor","ref","id","type","autoFocus","onChange","_onFormChange","disabled","size","onClick","_onCancelClick","PropTypes","instanceOf","MatrixClient","isRequired","func","subtleCrypto","window","crypto","subtle","webkitSubtle","friendlyError","message","cryptoFailMsg","async","decryptMegolmKeyFile","data","password","body","fileStr","TextDecoder","decode","Uint8Array","lineStart","lineEnd","indexOf","Error","line","slice","trim","HEADER_LINE","dataStart","undefined","dataEnd","base64","latin1String","atob","uint8Array","i","charCodeAt","decodeBase64","unpackMegolmKeyFile","brand","SdkConfig","get","ciphertextLength","salt","subarray","iv","iterations","ciphertext","hmac","aesKey","hmacKey","deriveKeys","toVerify","isValid","plaintext","verify","name","decrypt","counter","encryptMegolmKeyFile","options","kdfRounds","kdf_rounds","getRandomValues","encodedData","TextEncoder","encode","encrypt","cipherArray","bodyLength","resultBuffer","idx","set","toSign","sign","hmacArray","nLines","Math","ceil","lines","Array","o","encodeBase64","join","buffer","packMegolmKeyFile","start","Date","key","keybits","importKey","deriveBits","hash","now","logger","log","getTime","aesProm","hmacProm","all","String","fromCharCode","apply","btoa"],"mappings":"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","file":"bundles/e645af8f1eb390131f94/26.js","sourceRoot":""}